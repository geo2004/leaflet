<!DOCTYPE html> 
<html> 
<head> 
<title>Latest Earthquake Viewer</title> 
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet-src.js" crossorigin=""></script>
    <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" /> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script> 
<script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />
<style> 
    html, 
    body, 
    #map { 
        height: 100%; 
    } 
</style> 
 

</head> 
 
    <div id="map"></div> 
        <script type="text/javascript"> 
            L.mapbox.accessToken = 'pk.eyJ1IjoiYnJhbSIsImEiOiJtVnh2WG5jIn0.ayfAH274xz11f_CPxO2dRw';

        // OSM Mapnik 
       var osmLink = "<a href='https://www.openstreetmap.org'>OpenStreetMap</a>"; 
       var osm = L.tileLayer( 
            'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { 
                attribution: '&copy; ' + osmLink, 
                maxZoom: 18 
            }); 
 		function onEachFeature(feature, layer) {
	// does this feature have a property named popupContent?
	if (feature.properties && feature.properties.title) {
	layer.bindPopup(feature.properties.title);
		}
	}
 
 	function getValue(d) {
		return d > 10 ? '#800026' :
				d > 5  ? '#BD0026' :
				d > 2  ? '#E31A1C' :
				d > 1  ? '#FC4E2A' :
				d > 0.5   ? '#FD8D3C' :
				d > 0.2   ? '#FEB24C' :
				d > 0.1   ? '#FED976' :
							'#FFEDA0';
	}
            function style(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getValue(feature.properties.mag)
		};
	}

	var day = L.geoJson(null, {onEachFeature: onEachFeature, pointToLayer: function (feature, latlng) {return L.circleMarker(latlng, style(feature));}});
			omnivore.geojson('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson', null, day);	
	var week = L.geoJson(null, {onEachFeature: onEachFeature, pointToLayer: function (feature, latlng) {return L.circleMarker(latlng, style(feature));}});
			omnivore.geojson('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson', null, week);
	var month = L.geoJson(null, {onEachFeature: onEachFeature, pointToLayer: function (feature, latlng) {return L.circleMarker(latlng, style(feature));}});
			omnivore.geojson('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson', null, month);
  
		
      var map = L.map('map', {
		center: [-7, 110],
		zoom: 4,
		layers: [osm, day]
	});
		var baseLayers = {
		"OpenStreetMap": osm,
	};	
		var overlays = {
	"Kejadian Gempa Hari ini": day,
	"Kejadian Gempa Seminggu Terakhir": week,
	"Kejadian Gempa Sebulan Terakhir": month,
	};
		   L.control.layers(baseLayers,overlays,{}, {collapsed: false}).addTo(map);
</script> 
</body> 
 
</html> 
