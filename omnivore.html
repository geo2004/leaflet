<!DOCTYPE html> 
<html> 
<head> 
<title>Latest Earthquake Viewer</title> 
 <!-- Define a viewport to mobile devices to use - telling the browser to assume that the page is as wide as the device (width=device-width) and setting the initial page zoom level to be 1 (initial-scale=1.0) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Add normalize.css which enables browsers to render all elements more consistently and in line with modern standards as it only targets particular styles that need normalizing -->
    <link href="normalize.css" rel="stylesheet" media="all">
    <!-- For legacy support (IE 6/7, Firefox < 4, and Safari < 5) use normalize-legacy.css instead -->
    <!--<link href="css/normalize-legacy.css" rel="stylesheet" media="all">-->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet-src.js" crossorigin=""></script>
    <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" /> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script> 
<script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />
<style> 
    html, 
    body, 
    #map { 
        height: 100%; 
    }
.custom-popup .leaflet-popup-content-wrapper {
  background:#2c3e50;
  color:#fff;
  font-size:16px;
  line-height:24px;
  }
.custom-popup .leaflet-popup-content-wrapper a {
  color:rgba(255,255,255,0.5);
  }
.custom-popup .leaflet-popup-tip-container {
  width:30px;
  height:15px;
  }
.custom-popup .leaflet-popup-tip {
  border-left:15px solid transparent;
  border-right:15px solid transparent;
  border-top:15px solid #2c3e50;
  }	
</style> 
 

</head> 
 
    <div class='custom-popup' id="map"></div> 
        <script type="text/javascript"> 
            L.mapbox.accessToken = 'pk.eyJ1IjoiYnJhbSIsImEiOiJtVnh2WG5jIn0.ayfAH274xz11f_CPxO2dRw';

        // OSM Mapnik 
       var osmLink = "<a href='https://www.openstreetmap.org'>OpenStreetMap</a>"; 
       var osm = L.tileLayer( 
            'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { 
                attribution: '&copy; ' + osmLink, 
                maxZoom: 18 
            }); 
 		function onEachFeature(feature, layer) {
	// does this feature have a property named popupContent?
	if (feature.properties && feature.properties.title) {
	layer.bindPopup(feature.properties.title);
		}
	}
 
 	function getValue(d) {
		return d > 10 ? '#014636' :
				d > 9  ? '#014636' :
				d > 8  ? '#014636' :
				d > 7  ? '#016c59' :
				d > 6  ? '#02818a' :
				d > 5  ? '#3690c0' :
				d > 4  ? '#67a9cf' :
				d > 3  ? '#a6bddb' :
				d > 2  ? '#d0d1e6' :
				d > 1  ? '#ece2f0' :
				d > 0.5   ? '#FD8D3C' :
				d > 0.2   ? '#fff7fb' :
				d > 0.1   ? '#fff7fb' :
							'#fff7fb';
	}
            function style(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getValue(feature.properties.mag)
		};
	}

	var day = L.geoJson(null, {onEachFeature: onEachFeature, pointToLayer: function (feature, latlng) {return L.circleMarker(latlng, style(feature));}});
			omnivore.geojson('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson', null, day);	
	var week = L.geoJson(null, {onEachFeature: onEachFeature, pointToLayer: function (feature, latlng) {return L.circleMarker(latlng, style(feature));}});
			omnivore.geojson('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson', null, week);
	var month = L.geoJson(null, {onEachFeature: onEachFeature, pointToLayer: function (feature, latlng) {return L.circleMarker(latlng, style(feature));}});
			omnivore.geojson('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson', null, month);
  
		
      var map = L.map('map', {
		center: [-7, 110],
		zoom: 4,
		layers: [osm, day]
	});
		var baseLayers = {
		"OpenStreetMap": osm,
	};	
		var overlays = {
	"Kejadian Gempa Hari ini": day,
	"Kejadian Gempa Seminggu Terakhir": week,
	"Kejadian Gempa Sebulan Terakhir": month,
	};
		   L.control.layers(baseLayers,overlays,{}, {collapsed: false}).addTo(map);
</script> 
</body> 
 
</html> 
